> 参考资料：
>
> [Javascript作用域原理](https://www.laruence.com/2009/05/28/863.html)

两个重要的概念：

- [[scope]] 私有属性，一个数组，在函数创建时被创建在函数上，一开始被指向于当前的作用域链。在函数执行时会生成活动对象并将该活动对象入栈。

- 活动对象，在函数预编译时被创建（JS 是一边编译一边执行的语言），包括的属性有 arguments 指针等私有变量，函数内被声明的变量，被传入的变量（此时未赋值）

有了上面的作用域链, 在发生标识符解析的时候, 就会逆向查询当前scope chain列表的每一个活动对象的属性，如果找到同名的就返回。找不到，那就是这个标识符没有被定义。

下面是一道经典面试题，说出下面程序的输出：

```javascript
var foo = { n: 1 };
(function (foo) {
 var foo; // 声明了 foo 变量，但这个变量实际上是函数的入参，已经被声明过且有值，由于 var 可以重复声明，所以这一步什么都没发生，但如果是 let 或者 const 这样的块操作符，这一步就会报错
 console.log(foo.n);
 foo.n = 3; // 改变了 foo 指针指向对象中的属性值
 var foo = { n: 2 }; // 对 foo 指针重新进行了覆盖，此时函数内部的 foo 指针与函数外部的正式脱钩
 console.log(foo.n);
})(foo);

console.log(foo.n);
```

正确答案：1、2、3